{% set imagePath = (vich_uploader_asset(row, 'imageFile') ? vich_uploader_asset(row, 'imageFile') : asset('assets/images/no-image.png')) %}
{% set imagePathFilter = (vich_uploader_asset(row, 'imageFile') ? vich_uploader_asset(row, 'imageFile') : asset('assets/images/no-image.png')) | imagine_filter('news_290_220') %}
{% set imagePathFilterMobile = (vich_uploader_asset(row, 'imageFile') ? vich_uploader_asset(row, 'imageFile') : asset('assets/images/no-image.png')) | imagine_filter('news_382_298') %}
{% set imagePathFilterTablet = (vich_uploader_asset(row, 'imageFile') ? vich_uploader_asset(row, 'imageFile') : asset('assets/images/no-image.png')) | imagine_filter('news_224_169') %}
                        
{% if convert_images.fileExists(imagePath) == false %}
    {% set imagePath = imagePath | imagine_filter('news_290_220') %}
    {% set imagePathMobile = imagePath | imagine_filter('news_382_298') %}
    {% set imagePathTablet = imagePath | imagine_filter('news_224_169') %}
{% else %}
    {% set imagePath = convert_images.webpConvert(imagePathFilter, '', true) %}
    {% set imagePathMobile = convert_images.webpConvert(imagePathFilterMobile, '', true) %}
    {% set imagePathTablet = convert_images.webpConvert(imagePathFilterTablet, '', true) %}
{% endif %}

<div class="col-xs-12 col-sm-4 col-md-3 news-item">
    <div class="news-item-wrapper">
        <div class="media-thumb">
            <picture>
                <!--[if IE 9]><video style="display: none"><![endif]-->
                <source
                    data-srcset="{{ imagePathMobile != false ? asset(imagePathMobile) : asset(imagePathFilterMobile) }}"
                    media="(max-width: 639px) 100vw" />
                <source
                    data-srcset="{{ imagePathTablet != false ? asset(imagePathTablet) : asset(imagePathFilterTablet) }}"
                    media="(min-width: 640px) and (max-width: 1023px) 50vw" />
                <source
                    data-srcset="{{ imagePath != false ? asset(imagePath) : asset(imagePathFilter) }}"
                    media="(min-width: 1024px) 25vw" />
                <!--[if IE 9]></video><![endif]-->
                <img
                    src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                    data-src="{{ imagePath != false ? asset(imagePath) : asset(imagePathFilter) }}"
                    class="mr-3 img-thumbnail lazyload"
                    alt="{{row.getTitle()}}" />
            </picture>
            {% if category is defined %}
                <a class="media-thumb" title="{{ row.getTitle() }}" href="{{ path('news_show', {'slug': row.getUrl(), 'cat': category.getUrl() }) }}">
                    <i class="fa fa-link"></i>
                </a>
            {% else %}
                <a class="media-thumb" title="{{ row.getTitle() }}" href="{{ path('news_show', {'slug': row.getUrl() }) }}">
                    <i class="fa fa-link"></i>
                </a>
            {% endif %}
        </div>
        <div class="media-body">
            <h2 class="mt-0 mb-1">
                {% if category is defined %}
                    <a title="{{ row.getTitle() }}" href="{{ path('news_show', {'slug': row.getUrl(), 'cat': category.getUrl() }) }}" title="{{ row.getTitle() }}">
                        <span>{{ row.getTitle() }}</span>
                    </a>
                {% else %}
                    <a title="{{ row.getTitle() }}" href="{{ path('news_show', {'slug': row.getUrl() }) }}" title="{{ row.getTitle() }}">
                        <span>{{ row.getTitle() }}</span>
                    </a>
                {% endif %}
            </h2>
            <p>{{ row.getDescription()|slice(0, 110) }}</p>
        </div>
    </div>
</div>